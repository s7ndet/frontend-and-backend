<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }

    input, button, select {
      padding: 8px 12px;
      font-size: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      transition: 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .search-line {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .user-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 15px;
    }

    .user-card {
      border-radius: 10px;
      padding: 15px;
      color: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .user-card:hover {
      transform: scale(1.03);
    }

    .green { background: #28a745; }
    .blue { background: #007bff; }
    .red { background: #dc3545; }

    #stats {
      text-align: center;
      margin-top: 15px;
      font-weight: bold;
    }

    .sort-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .sort-buttons button.active {
      background-color: #17a2b8;
    }
  </style>
</head>
<body>
  <h1>–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</h1>

  <div class="controls">
    <input type="number" id="userCount" placeholder="–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä —Å–∞–Ω—ã (5‚Äì100)" min="5" max="100">
    <button id="uGenerate">uGenerate</button>
    <!-- üîπ –¢–µ–∫ –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä–¥—ã —Ç–∞–∑–∞–ª–∞—É –±–∞—Ç—ã—Ä–º–∞—Å—ã -->
    <button id="clearUsers">–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä–¥—ã ”©—à—ñ—Ä—É</button>
  </div>

  <div class="search-line">
    <input type="text" id="search" placeholder="–ê—Ç—ã –±–æ–π—ã–Ω—à–∞ —ñ–∑–¥–µ—É...">
    <button id="clear">–¢–∞–∑–∞–ª–∞—É</button>
  </div>

  <div class="sort-buttons">
    <button id="sortName">–ê—Ç—ã</button>
    <button id="sortAge">–ñ–∞—Å—ã</button>
    <button id="sortCity">“ö–∞–ª–∞—Å—ã</button>
  </div>

  <div id="userList" class="user-list"></div>
  <div id="stats"></div>

  <script>
    const names = [
      "–ê–π–∂–∞–Ω","–ë–µ–∫–∑–∞—Ç","–î–∞–Ω–∞","–ï—Ä–º–µ–∫","–°–∞–Ω–¥—É“ì–∞—à","“ö—É–∞–Ω—ã—à","–ê–π–Ω“±—Ä","–ú–∞“õ—Å–∞—Ç","–ñ–∞–Ω–∞—Ä","–¢–∞–ª“ì–∞—Ç",
      "–ê–π–≥–µ—Ä—ñ–º","–ï—Ä–∞—Å—ã–ª","–ú”©–ª–¥—ñ—Ä","–ê—Ä–º–∞–Ω","–î–∏–∞—Å","”ò–ª–∏—è","–°”ô—É–ª–µ","–ë–∞—É—ã—Ä–∂–∞–Ω","–ñ–∞–Ω–±–æ–ª–∞—Ç","–ê–π–¥–æ—Å",
      "–ù–∞–∑–µ—Ä–∫–µ","–ê—Å“õ–∞—Ä","–ì“Ø–ª–Ω–∞—Ä","“ö–∞—Ä–ª—ã“ì–∞—à","”ò–¥—ñ–ª"
    ];
    const cities = [
      "–ê—Å—Ç–∞–Ω–∞","–ê–ª–º–∞—Ç—ã","–®—ã–º–∫–µ–Ω—Ç","–ê“õ—Ç”©–±–µ","“ö–∞—Ä–∞“ì–∞–Ω–¥—ã","–¢–∞—Ä–∞–∑","”®—Å–∫–µ–º–µ–Ω","–°–µ–º–µ–π","–ü–∞–≤–ª–æ–¥–∞—Ä","“ö—ã–∑—ã–ª–æ—Ä–¥–∞",
      "–û—Ä–∞–ª","–ö”©–∫—à–µ—Ç–∞—É","–¢–∞–ª–¥—ã“õ–æ—Ä“ì–∞–Ω","–ü–µ—Ç—Ä–æ–ø–∞–≤–ª","–ê—Ç—ã—Ä–∞—É","–ñ–µ–∑“õ–∞–∑“ì–∞–Ω","–ï–∫—ñ–±–∞—Å—Ç“±–∑","–°–∞—Ç–ø–∞–µ–≤","–†–∏–¥–¥–µ—Ä","–ë–∞–ª“õ–∞—à",
      "–¢–µ–º—ñ—Ä—Ç–∞—É","“ö–æ—Å—Ç–∞–Ω–∞–π","–ö–µ–Ω—Ç–∞—É","–¢“Ø—Ä–∫—ñ—Å—Ç–∞–Ω","–õ–∏—Å–∞–∫–æ–≤"
    ];

    let users = [];
    let originalUsers = [];
    let sortState = { name: 1, age: 1, city: 1 };

    const getRandomItem = arr => arr[Math.floor(Math.random() * arr.length)];
    const getRandomAge = () => Math.floor(Math.random() * 70) + 10;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
    document.getElementById("uGenerate").addEventListener("click", () => {
      const count = parseInt(document.getElementById("userCount").value);
      if (count < 5 || count > 100 || isNaN(count)) {
        alert("–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä —Å–∞–Ω—ã 5 –ø–µ–Ω 100 –∞—Ä–∞–ª—ã“ì—ã–Ω–¥–∞ –±–æ–ª—É –∫–µ—Ä–µ–∫!");
        return;
      }
      users = [];
      for (let i = 1; i <= count; i++) {
        users.push({
          id: i,
          name: getRandomItem(names),
          age: getRandomAge(),
          city: getRandomItem(cities),
          info: "“ö–æ—Å—ã–º—à–∞ –∞“õ–ø–∞—Ä–∞—Ç: “õ—ã–∑—ã“ì—É—à—ã–ª—ã“õ—Ç–∞—Ä, –º–∞–º–∞–Ω–¥—ã“ì—ã –∂”ô–Ω–µ —Ç.–±."
        });
      }
      originalUsers = [...users];
      displayUsers(users);
    });

    // üîπ –¢–µ–∫ –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä–¥—ã ”©—à—ñ—Ä—É (—ñ–∑–¥–µ—É –º–µ–Ω —Å“±—Ä—ã–ø—Ç–∞—É —Å–∞“õ—Ç–∞–ª–∞–¥—ã)
    document.getElementById("clearUsers").addEventListener("click", () => {
      document.getElementById("userList").innerHTML = "";
      document.getElementById("stats").textContent = "–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä ”©—à—ñ—Ä—ñ–ª–¥—ñ.";
    });

    // –¢–µ–∫ —Å“±—Ä—ã–ø—Ç–∞—É –º–µ–Ω —ñ–∑–¥–µ—É–¥—ñ —Ç–∞–∑–∞–ª–∞—É
    document.getElementById("clear").addEventListener("click", () => {
      sortState = { name: 1, age: 1, city: 1 };
      document.getElementById("search").value = "";
      users = [...originalUsers];
      displayUsers(users);
    });

    // –Ü–∑–¥–µ—É
    document.getElementById("search").addEventListener("input", e => {
      const text = e.target.value.toLowerCase();
      const filtered = users.filter(u => u.name.toLowerCase().includes(text));
      displayUsers(filtered);
    });

    // –°“±—Ä—ã–ø—Ç–∞—É
    document.getElementById("sortName").addEventListener("click", () => {
      users.sort((a, b) => a.name.localeCompare(b.name) * sortState.name);
      sortState.name *= -1;
      displayUsers(users);
    });

    document.getElementById("sortAge").addEventListener("click", () => {
      users.sort((a, b) => (a.age - b.age) * sortState.age);
      sortState.age *= -1;
      displayUsers(users);
    });

    document.getElementById("sortCity").addEventListener("click", () => {
      users.sort((a, b) => a.city.localeCompare(b.city) * sortState.city);
      sortState.city *= -1;
      displayUsers(users);
    });

    // –ö”©—Ä—Å–µ—Ç—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
    function displayUsers(list) {
      const container = document.getElementById("userList");
      container.innerHTML = "";

      list.forEach(u => {
        const card = document.createElement("div");
        card.classList.add("user-card");
        if (u.age < 18) card.classList.add("red");
        else if (u.age <= 35) card.classList.add("blue");
        else card.classList.add("green");

        card.innerHTML = `
          <h3>${u.name}</h3>
          <p><strong>ID:</strong> ${u.id}</p>
          <p><strong>–ñ–∞—Å—ã:</strong> ${u.age}</p>
          <p><strong>“ö–∞–ª–∞—Å—ã:</strong> ${u.city}</p>
        `;

        card.addEventListener("click", () => {
          alert(`${u.name} (${u.age}) ‚Äî ${u.city}\n${u.info}`);
        });

        container.appendChild(card);
      });

      if (list.length > 0) {
        const avgAge = (list.reduce((sum, u) => sum + u.age, 0) / list.length).toFixed(1);
        document.getElementById("stats").textContent =
          `–ë–∞—Ä–ª—ã“ì—ã: ${list.length} –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã | –û—Ä—Ç–∞—à–∞ –∂–∞—Å: ${avgAge}`;
      } else {
        document.getElementById("stats").textContent = "";
      }
    }
  </script>
</body>
</html>

